<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Baptismal Certificate Request | Our Lady of Light Shrine</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --sidebar-width: 250px;
      --header-height: 60px;
      --primary-light: #A0D3D9;
      --primary-bg: #F0F2F2;
      --primary-accent: #A67D03;
      --primary-dark: #8C5C03;
      --primary-darker: #734002;
    }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: var(--primary-bg);
    }
    #sidebar {
      width: var(--sidebar-width);
      height: 100vh;
      position: fixed;
      left: 0;
      top: 0;
      background: linear-gradient(180deg, var(--primary-darker) 0%, var(--primary-dark) 100%);
      color: white;
      z-index: 1000;
      display: flex;
      flex-direction: column;
    }
    .sidebar-logo {
      padding: 20px;
      text-align: center;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    }
    .sidebar-logo img {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid var(--primary-light);
    }
    .sidebar-logo h4 {
      margin: 0;
      font-weight: 600;
      color: white;
    }
    .sidebar-menu {
      flex: 1;
      overflow-y: auto;
      padding: 20px 0;
    }
    .menu-section-title {
      padding: 5px 20px;
      font-size: 0.75rem;
      font-weight: 600;
      text-transform: uppercase;
      color: var(--primary-light);
    }
    #sidebar ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }
    #sidebar ul li a {
      padding: 10px 20px;
      color: rgba(255, 255, 255, 0.8);
      display: block;
      text-decoration: none;
      transition: 0.3s;
    }
    #sidebar ul li a:hover {
      color: white;
      background: rgba(255, 255, 255, 0.1);
      border-left: 3px solid var(--primary-accent);
    }
    #sidebar ul li.active a {
      color: white;
      background: rgba(255, 255, 255, 0.1);
      border-left: 3px solid var(--primary-accent);
    }
    #header {
      height: var(--header-height);
      background: white;
      position: fixed;
      left: var(--sidebar-width);
      right: 0;
      top: 0;
      z-index: 100;
      display: flex;
      align-items: center;
      padding: 0 20px;
      justify-content: space-between;
    }
    .welcome-message {
      font-size: 1rem;
      color: var(--primary-dark);
    }
    .user-profile img {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid var(--primary-light);
    }
    .user-name {
      font-weight: 500;
      color: var(--primary-dark);
    }
    #content {
      margin-left: var(--sidebar-width);
      margin-top: var(--header-height);
      padding: 20px;
    }
    .card p {
      margin-bottom: 0.3rem;
    }
    .card h6 {
      margin-bottom: 0.6rem;
      font-size: 0.9rem;
      color: #6c757d;
    }
    .card .btn-outline-secondary {
      font-size: 0.8rem;
      padding: 3px 10px;
    }
    .review-row {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 0.4rem;
      width: 100%;
    }
    .review-row strong {
      flex: 2;
      width: 300px;
      text-align: left;
    }
    .review-value {
      flex: 2;
      text-align: left;
      font-weight: 500;
      color: #333;
    }
    .confirmation-card {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 1050;
      width: 400px;
      display: none;
    }
    .overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.5);
      z-index: 1040;
      display: none;
    }
    .is-invalid {
      border-color: #dc3545;
    }
    .invalid-feedback {
      color: #dc3545;
      font-size: 0.875em;
      margin-top: 0.25rem;
    }
    .add-godparent {
      color: var(--primary-dark);
      cursor: pointer;
      text-decoration: none;
    }
    .add-godparent:hover {
      text-decoration: underline;
    }
    .remove-godparent {
      cursor: pointer;
      background-color: #f8f9fa;
    }
    .required-field:after {
      content: " *";
      color: red;
    }
    /* Style for date inputs */
    input[type="date"] {
      position: relative;
      padding: 0.375rem 0.75rem;
    }
    input[type="date"]::-webkit-calendar-picker-indicator {
      background: transparent;
      bottom: 0;
      color: transparent;
      cursor: pointer;
      height: auto;
      left: 0;
      position: absolute;
      right: 0;
      top: 0;
      width: auto;
    }
    .date-input-wrapper {
      position: relative;
    }
    .date-input-wrapper::after {
      content: "\f073";
      font-family: "Font Awesome 6 Free";
      font-weight: 900;
      position: absolute;
      right: 10px;
      top: 50%;
      transform: translateY(-50%);
      pointer-events: none;
      color: var(--primary-dark);
    }
  </style>
</head>
<body>

<div class="overlay" id="overlay"></div>

<div class="card shadow-lg confirmation-card" id="confirmationCard">
  <div class="card-body text-center p-4">
    <div class="mb-3">
      <i class="fas fa-check-circle text-success" style="font-size: 3rem;"></i>
    </div>
    <h4 class="card-title mb-3">Request Submitted Successfully!</h4>
    <p class="card-text mb-4">Your baptismal certificate request has been received. You will get a confirmation email shortly.</p>
    <div class="d-flex justify-content-center">
      <button class="btn btn-dark me-2" onclick="closeConfirmation()">Track Request</button>
      <button class="btn btn-outline-secondary" onclick="closeConfirmation()">Close</button>
    </div>
  </div>
</div>

<div id="sidebar">
  <div class="sidebar-logo">
    <img src="LOGO.png" alt="Church Logo">
    <h4>OUR LADY OF LIGHT SHRINE</h4>
  </div>
  <div class="sidebar-menu">
    <div class="menu-section">
      <div class="menu-section-title">Main Menu</div>
      <ul>
        <li><a href="#"><i class="fas fa-home"></i> Dashboard</a></li>
        <li class="active"><a href="#"><i class="fas fa-file-alt"></i> Request Document</a></li>
        <li><a href="#"><i class="fas fa-search"></i> Track Request</a></li>
        <li><a href="#"><i class="fas fa-list"></i> My Requests</a></li>
      </ul>
    </div>
  </div>
</div>

<div id="header">
  <div class="welcome-message">Welcome to OUR LADY OF LIGHT SHRINE Portal</div>
  <div class="d-flex align-items-center gap-4">
    <div class="position-relative">
      <i class="fas fa-bell fa-lg text-secondary"></i>
      <span class="position-absolute top-0 start-100 translate-middle p-1 bg-danger border border-light rounded-circle"></span>
    </div>
    <div class="user-profile d-flex align-items-center gap-2">
      <img src="AVATAR.png" alt="User Profile">
      <span class="user-name">Janice Cadisim </span>
    </div>
  </div>
</div>

<div id="content">
  <div class="container-fluid">
    <div class="mb-3">
      <h1 class="h3 mb-1" style="color: var(--primary-dark);">Baptismal Certificate Request</h1>
      <p class="text-muted mb-0">Home / <span class="fw-semibold text-dark">Request Document</span></p>
    </div>

    <div id="requestFormSection">
      <form id="baptismalForm" novalidate>
        <div class="card shadow-sm p-4">
          <div class="mb-3">
            <label class="form-label required-field">Child's Full Name</label>
            <input type="text" class="form-control" id="childFullName" placeholder="e.g. Juan M. Dela Cruz" required>
            <div class="invalid-feedback">Please provide the child's full name.</div>
          </div>
          <div class="row mb-3">
            <div class="col-md-6">
              <label class="form-label required-field">Date of Birth</label>
              <div class="date-input-wrapper">
                <input type="date" class="form-control" id="dob" required>
              </div>
              <div class="invalid-feedback">Please provide the date of birth.</div>
            </div>
            <div class="col-md-6">
              <label class="form-label required-field">Place of Birth</label>
              <input type="text" class="form-control" id="pob" placeholder="e.g. Poblacion, Anda, Bohol" required>
              <div class="invalid-feedback">Please provide the place of birth.</div>
            </div>
          </div>
          <div class="row mb-3">
            <div class="col-md-6">
              <label class="form-label required-field">Baptismal Date</label>
              <div class="date-input-wrapper">
                <input type="date" class="form-control" id="baptismDate" required>
              </div>
              <div class="invalid-feedback">Please provide the baptismal date.</div>
            </div>
            <div class="col-md-6">
              <label class="form-label required-field">Place of Baptism</label>
              <input type="text" class="form-control" id="placeOfBaptism" placeholder="e.g. Our Lady of Light Shrine, Loon, Bohol" required>
              <div class="invalid-feedback">Please provide the place of baptism.</div>
            </div>
          </div>

          <div class="mb-3">
            <label class="form-label required-field">Godparents/Sponsors</label>
            <div id="godparentsContainer">
              <div class="godparent-row input-group mb-2">
                <input type="text" class="form-control godparent-name" placeholder="Full name of Godparent" required>
                <span class="input-group-text remove-godparent"><i class="fas fa-times"></i></span>
              </div>
            </div>
            <a id="addGodparent" class="add-godparent"><i class="fas fa-plus-circle me-1"></i> Add another godparent</a>
          </div>

          <div class="row mb-3">
            <div class="col-md-6">
              <label class="form-label">Officiating Priest (Optional)</label>
              <input type="text" class="form-control" id="officiatingPriest" placeholder="e.g. Rev. Fr. John Paul Smith">
            </div>
            <div class="col-md-6">
              <label class="form-label">Parish Priest (Optional)</label>
              <input type="text" class="form-control" id="parishPriest" placeholder="Rev. John Santos">
            </div>
          </div>
          <div class="row mb-3">
            <div class="col-md-6">
              <label class="form-label required-field">Father's Name</label>
              <input type="text" class="form-control" id="fatherName" placeholder="e.g. Juan Carlos J. Dela Cruz" required>
              <div class="invalid-feedback">Please provide the father's name.</div>
            </div>
            <div class="col-md-6">
              <label class="form-label required-field">Mother's Maiden Name</label>
              <input type="text" class="form-control" id="motherName" placeholder="e.g. Maria L. Mendoza" required>
              <div class="invalid-feedback">Please provide the mother's name.</div>
            </div>
          </div>
          <div class="mb-4">
            <label class="form-label required-field">Contact Info</label>
            <input type="email" class="form-control" id="email" placeholder="e.g. juan.delacruz@example.com" required>
            <div class="invalid-feedback">Please provide a valid email address.</div>
          </div>
          <div class="form-check mb-4">
            <input class="form-check-input" type="checkbox" id="agreeTerms" required>
            <label class="form-check-label" for="agreeTerms">
              I certify that the information provided is accurate and I agree to the 
              <a href="#" data-bs-toggle="modal" data-bs-target="#termsModal">terms and conditions</a>
            </label>
            <div class="invalid-feedback">You must agree to the terms and conditions.</div>
          </div>
          <div class="text-center">
            <button type="button" class="btn btn-dark px-4" id="submitBtn" onclick="validateForm()">
              <i class="fas fa-paper-plane me-2"></i> Submit Request
            </button>
          </div>
        </div>
      </form>
    </div>

    <div id="reviewSection" style="display: none;">
      <div class="card shadow-sm p-4">
        <div class="d-flex justify-content-between align-items-center mb-3">
          <h4>Review Your Details</h4>
          <button type="button" class="btn btn-outline-secondary btn-sm" onclick="goBack()"><i class="fas fa-edit"></i> Edit Details</button>
        </div>
        <div class="mb-4">
          <h6>Personal Details</h6>
          <div class="review-row">
            <strong>Child's Full Name:</strong>
            <span class="review-value" id="reviewFullName"></span>
          </div>
          <div class="review-row">
            <strong>Date of Birth:</strong>
            <span class="review-value" id="reviewDOB"></span>
          </div>
          <div class="review-row">
            <strong>Place of Birth:</strong>
            <span class="review-value" id="reviewPOB"></span>
          </div>
        </div>
        <div class="mb-4">
          <h6>Baptism Details</h6>
          <div class="review-row">
            <strong>Baptismal Date:</strong> 
            <span class="review-value" id="reviewBaptismDate"></span>
          </div> 
          <div class="review-row"> 
            <strong>Place of Baptism:</strong> 
            <span class="review-value" id="reviewPlaceOfBaptism"></span>
          </div>
          <div class="review-row">
            <strong>Name of Officiating Priest:</strong> 
            <span class="review-value" id="reviewOfficiatingPriest"></span>
          </div>
          <div class="review-row">
            <strong>Parish Priest:</strong> 
            <span class="review-value" id="reviewParishPriest"></span>
          </div>
          <div class="review-row">
            <strong>Name of Godparents/Sponsors:</strong> 
            <span class="review-value" id="reviewSponsors"></span>
          </div>
        </div>
        <div class="mb-4">
          <h6>Parent's Details</h6>
          <div class="review-row">
            <strong>Father's Name:</strong> 
            <span class="review-value" id="reviewFatherName"></span>
          </div>
          <div class="review-row">
            <strong>Mother's Maiden Name:</strong> 
            <span class="review-value" id="reviewMotherName"></span>
          </div>
        </div>
        <div class="mb-4">
          <h6>Contact Information</h6>
          <div class="review-row">
            <strong>Email:</strong> 
            <span class="review-value" id="reviewEmail"></span>
          </div>
        </div>
        <div class="alert alert-info d-flex align-items-center" role="alert">
          <i class="fas fa-info-circle me-2"></i>
          <div>Please review all the details before submitting.</div>
        </div>
        <div class="text-center mt-4">
          <button type="button" class="btn btn-dark px-4" onclick="submitRequest()">Confirm & Submit</button>
        </div>
      </div>
    </div>

    <footer class="text-center py-3 mt-5" style="background-color: #f8f9fa; color: #6c757d; font-size: 0.9rem;">
      &copy; Copyright Our Lady of Shrine Certificate Request System. All rights reserved.
    </footer>
  </div>
</div>

<div class="modal fade" id="termsModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Terms and Conditions</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <p>By submitting this request, you certify that all information provided is accurate to the best of your knowledge. Falsification of information may result in the cancellation of your request. Our Lady of Light Shrine reserves the right to verify all information provided before issuing any certificates.</p>
        <p>Processing time may take 3-5 business days. You will receive an email notification once your request has been processed.</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
  // Godparents functionality
  document.addEventListener('DOMContentLoaded', function() {
    // Add godparent
    document.getElementById('addGodparent').addEventListener('click', function(e) {
      e.preventDefault();
      const container = document.getElementById('godparentsContainer');
      const newRow = document.createElement('div');
      newRow.className = 'godparent-row input-group mb-2';
      newRow.innerHTML = `
        <input type="text" class="form-control godparent-name" placeholder="Full name of godparent" required>
        <span class="input-group-text remove-godparent"><i class="fas fa-times"></i></span>
      `;
      container.appendChild(newRow);
      
      // Add event listener to new remove button
      newRow.querySelector('.remove-godparent').addEventListener('click', function() {
        if (document.querySelectorAll('.godparent-row').length > 1) {
          container.removeChild(newRow);
        } else {
          alert('At least one godparent is required.');
        }
      });
    });

    // Remove godparent
    document.querySelectorAll('.remove-godparent').forEach(btn => {
      btn.addEventListener('click', function() {
        if (document.querySelectorAll('.godparent-row').length > 1) {
          this.closest('.godparent-row').remove();
        } else {
          alert('At least one godparent is required.');
        }
      });
    });

    // Format dates for display in review section
    function formatDateForDisplay(dateString) {
      if (!dateString) return '';
      const date = new Date(dateString);
      return date.toLocaleDateString('en-US', {
        year: 'numeric',
        month: '2-digit',
        day: '2-digit'
      });
    }

    // Update the showReview function to use the formatted dates
    window.showReview = function() {
      // Basic fields
      document.getElementById("reviewFullName").innerText = document.getElementById("childFullName").value;
      document.getElementById("reviewDOB").innerText = formatDateForDisplay(document.getElementById("dob").value);
      document.getElementById("reviewPOB").innerText = document.getElementById("pob").value;
      document.getElementById("reviewBaptismDate").innerText = formatDateForDisplay(document.getElementById("baptismDate").value);
      document.getElementById("reviewPlaceOfBaptism").innerText = document.getElementById("placeOfBaptism").value;
      document.getElementById("reviewOfficiatingPriest").innerText = document.getElementById("officiatingPriest").value || 'Not provided';
      document.getElementById("reviewParishPriest").innerText = document.getElementById("parishPriest").value || 'Not provided';
      document.getElementById("reviewFatherName").innerText = document.getElementById("fatherName").value;
      document.getElementById("reviewMotherName").innerText = document.getElementById("motherName").value;
      document.getElementById("reviewEmail").innerText = document.getElementById("email").value;
      
      // Godparents
      const godparents = Array.from(document.querySelectorAll('.godparent-name')).map(gp => gp.value);
      document.getElementById("reviewSponsors").innerText = godparents.join(', ');

      // Show review section
      document.getElementById("requestFormSection").style.display = "none";
      document.getElementById("reviewSection").style.display = "block";
    }
  });

  function validateForm() {
    const form = document.getElementById('baptismalForm');
    const requiredFields = form.querySelectorAll('[required]');
    let isValid = true;

    // Reset validation
    form.classList.remove('was-validated');
    requiredFields.forEach(field => {
      field.classList.remove('is-invalid');
      const feedback = field.nextElementSibling;
      if (feedback && feedback.classList.contains('invalid-feedback')) {
        feedback.textContent = '';
      }
    });

    // Validate all required fields
    requiredFields.forEach(field => {
      if (!field.value.trim()) {
        field.classList.add('is-invalid');
        const feedback = field.nextElementSibling;
        if (feedback && feedback.classList.contains('invalid-feedback')) {
          feedback.textContent = 'This field is required.';
        }
        isValid = false;
      }
      
      // Special validation for email
      if (field.type === 'email' && field.value.trim()) {
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(field.value)) {
          field.classList.add('is-invalid');
          const feedback = field.nextElementSibling;
          if (feedback) {
            feedback.textContent = 'Please enter a valid email address.';
          }
          isValid = false;
        }
      }
    });

    // Validate godparents
    const godparents = document.querySelectorAll('.godparent-name');
    let godparentsValid = true;
    godparents.forEach(gp => {
      if (!gp.value.trim()) {
        gp.classList.add('is-invalid');
        godparentsValid = false;
      }
    });
    
    if (!godparentsValid) {
      isValid = false;
    }

    // Validate terms checkbox
    const agreeTerms = document.getElementById('agreeTerms');
    if (!agreeTerms.checked) {
      const feedback = agreeTerms.nextElementSibling.nextElementSibling;
      if (feedback) {
        feedback.textContent = 'You must agree to the terms and conditions.';
      }
      isValid = false;
    }

    if (isValid) {
      showReview();
    } else {
      const firstInvalid = form.querySelector('.is-invalid');
      if (firstInvalid) {
        firstInvalid.scrollIntoView({ behavior: 'smooth', block: 'center' });
        firstInvalid.focus();
      }
    }
    
    // Prevent modal from showing when validation fails
    return false;
  }

  function goBack() {
    document.getElementById("reviewSection").style.display = "none";
    document.getElementById("requestFormSection").style.display = "block";
  }

  function submitRequest() {
    // Show confirmation
    document.getElementById('overlay').style.display = 'block';
    document.getElementById('confirmationCard').style.display = 'block';
    
    // Reset form after 3 seconds (simulating submission)
    setTimeout(() => {
      document.getElementById('requestFormSection').style.display = 'block';
      document.getElementById('reviewSection').style.display = 'none';
      document.getElementById('baptismalForm').reset();
      
      // Clear godparents (except first one)
      const container = document.getElementById('godparentsContainer');
      while (container.children.length > 1) {
        container.removeChild(container.lastChild);
      }
      container.querySelector('.godparent-name').value = '';
    }, 3000);
  }

  function closeConfirmation() {
    document.getElementById('overlay').style.display = 'none';
    document.getElementById('confirmationCard').style.display = 'none';
  }
</script>
</body>
</html> 

