<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Baptismal Certificate Request - Our Lady of Light Shrine</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --golden-yellow: #BA9121;
            --black: #000000;
            --light-cyan: #A8D4D8;
            --khaki: #A99556;
            --charcoal-blue: #3B4857;
            --brown-ochre: #8A6D2D;
            --mustard: #B28B31;
            --desaturated-blue: #78949B;
            --primary: var(--golden-yellow);
            --secondary: var(--khaki);
            --accent: var(--mustard);
            --dark: var(--charcoal-blue);
            --light: var(--light-cyan);
            --neutral: var(--desaturated-blue);
            --border: var(--brown-ochre);
            --text-dark: var(--black);
            --text-light: white;
        }
        
        body {
            background-color: var(--light);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--dark);
        }
        
        .header {
            background-color: var(--dark);
            color: var(--text-light);
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 15px 0;
            position: sticky;
            top: 0;
            z-index: 1020;
        }
        
        .header-logo {
            width: 60px;
            height: auto;
            margin-right: 15px;
        }
        
        .church-name {
            color: var(--text-light);
            font-weight: 700;
            font-size: 1.5rem;
        }
        
        .profile-section {
            color: var(--text-light);
            display: flex;
            align-items: center;
        }
        
        .profile-icon {
            background-color: var(--accent);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
        }
        
        .btn-primary {
            background-color: var(--primary);
            border-color: var(--border);
            color: var(--text-dark);
            padding: 10px 24px;
            font-weight: 500;
        }
        
        .btn-primary:hover {
            background-color: var(--accent);
            border-color: var(--border);
            color: var(--text-dark);
        }
        
        .btn-secondary {
            background-color: var(--neutral);
            border-color: var(--neutral);
            color: var(--text-light);
        }
        
        .btn-secondary:hover {
            background-color: var(--dark);
            border-color: var(--dark);
            color: var(--text-light);
        }
        
        .footer {
            background-color: var(--dark);
            color: var(--text-light);
            padding: 40px 0 20px;
            margin-top: 50px;
        }
        
        .footer-logo-img {
            width: 50px;
            height: auto;
            margin-right: 15px;
        }
        
        .footer-title {
            font-size: 1.2rem;
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        .footer-links a {
            color: var(--light);
            text-decoration: none;
            display: block;
            margin-bottom: 8px;
            transition: color 0.2s;
        }
        
        .footer-links a:hover {
            color: var(--text-light);
        }
        
        .contact-info p {
            margin-bottom: 5px;
        }
        
        .form-label {
            font-weight: 500;
            color: var(--dark);
            margin-bottom: 8px;
        }
        
        .required-field::after {
            content: " *";
            color: #dc3545; 
        }
        
        .certificate-form-container {
            background-color: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
            margin-top: 30px;
            margin-bottom: 30px;
            border: 1px solid var(--light);
        }
        
        .form-section-title {
            color: var(--border);
            border-bottom: 2px solid var(--light);
            padding-bottom: 8px;
            margin-bottom: 20px;
            font-size: 1.25rem;
        }
        
        .godparent-row {
            margin-bottom: 10px;
        }
        
        .remove-godparent {
            color: #dc3545; 
            cursor: pointer;
            margin-left: 10px;
            transition: opacity 0.2s;
        }
        
        .remove-godparent:hover {
            opacity: 0.8;
        }
        
        .add-godparent {
            color: var(--border);
            cursor: pointer;
            margin-top: 10px;
            display: inline-block;
            font-weight: 500;
        }
        
        .add-godparent:hover {
            text-decoration: underline;
            color: var(--primary);
        }
        
        .info-icon {
            color: var(--border);
            margin-right: 8px;
        }
        
        .review-details {
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }
        
        .review-details:last-child {
            border-bottom: none;
        }
        
        .review-row {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 0.4rem;
            width: 100%;
        }
        
        .review-row strong {
            flex: 2;
            min-width: 200px;
            text-align: left;
        }
        
        .review-value {
            flex: 2;
            text-align: left;
            font-weight: 500;
            color: var(--dark);
        }
        
        .review-godparents-container {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }
        
        .email-help-text {
            font-size: 0.875rem;
            color: var(--neutral);
            margin-top: 0.25rem;
        }
        
        .is-invalid {
            border-color: #dc3545;
        }
        
        .invalid-feedback {
            display: none;
            width: 100%;
            margin-top: 0.25rem;
            font-size: 0.875rem;
            color: #dc3545;
        }
        
        .form-control {
            padding: 10px 15px;
            border-radius: 6px;
            border: 1px solid var(--light);
        }
        
        .form-control:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 0.25rem rgba(186, 145, 33, 0.25);
        }

        .form-check-input.is-invalid {
            border-color: #dc3545;
        }

        .form-check-input.is-invalid ~ .form-check-label {
            color: #dc3545;
        }

        .form-check-input.is-invalid ~ .invalid-feedback {
            display: block;
        }
        
        .page-title {
            color: var(--dark);
            font-weight: 700;
            margin-bottom: 20px;
            position: relative;
            padding-bottom: 10px;
            font-size: 1.8rem;
        }
        
        .page-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 3px;
            background-color: var(--primary);
        }
        
        .page-description {
            color: var(--dark);
            max-width: 700px;
            margin: 0 auto 40px;
            opacity: 0.8;
        }
        
        .required-note {
            color: #dc3545;
            font-size: 0.875rem;
            margin-bottom: 15px;
            font-style: italic;
        }
        
        .success-icon {
            font-size: 4rem;
            color: #28a745; /* Keeping green for success */
            margin-bottom: 20px;
        }
        
        #successSubmittedModal .modal-dialog {
            max-width: 400px;
        }
        
        #successSubmittedModal .modal-body {
            padding: 30px;
        }
        
        #successSubmittedModal .success-icon {
            font-size: 3.5rem;
            margin-bottom: 15px;
        }
        
        #successSubmittedModal h3 {
            font-size: 1.3rem;
            margin-bottom: 10px;
        }
        
        #successSubmittedModal p {
            font-size: 1rem;
            margin-bottom: 20px;
        }

        .alert-info {
            background-color: var(--light);
            border-color: var(--light);
            color: var(--dark);
        }

        .card {
            border: 1px solid var(--light);
            background-color: white;
        }

        .modal-header {
            background-color: var(--dark);
            color: var(--text-light);
        }

        .input-group-text {
            background-color: var(--light);
            color: var(--dark);
        }

        .form-check-label a {
            color: var(--primary);
        }

        .form-check-label a:hover {
            color: var(--accent);
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-6 d-flex align-items-center">
                    <img src="LOGO.png" alt="Church Logo" class="header-logo">
                    <span class="church-name">OUR LADY OF LIGHT SHRINE</span>
                </div>
                <div class="col-md-6 text-end">
                    <div class="profile-section ms-auto d-inline-flex">
                        <div class="profile-icon">
                            <i class="fas fa-user text-white"></i>
                        </div>
                        <span>Guest</span>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <main class="container my-5">
        <div class="row justify-content-center">
            <div class="col-lg-10">
                <h1 class="page-title text-center">Baptismal Certificate Request</h1>
                    <div id="requestFormSection">
                        <form id="baptismalForm" novalidate>
                            <div class="card shadow-sm p-4">
                                 <p class="required-note">Note: All fields marked with an asterisk (*) are required.</p>
                                <div class="mb-3">
                                    <label class="form-label required-field">Child's Full Name</label>
                                    <input type="text" class="form-control" id="childName" placeholder="e.g. Juan M. Dela Cruz" required>
                                    <div class="invalid-feedback">Please provide the child's full name.</div>
                                </div>
                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <label class="form-label required-field">Date of Birth</label>
                                        <div class="date-input-wrapper">
                                            <input type="date" class="form-control" id="birthDate" required>
                                        </div>
                                        <div class="invalid-feedback">Please provide the date of birth.</div>
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label required-field">Place of Birth</label>
                                        <input type="text" class="form-control" id="birthPlace" placeholder="e.g. Poblacion, Anda, Bohol" required>
                                        <div class="invalid-feedback">Please provide the place of birth.</div>
                                    </div>
                                </div>
                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <label class="form-label required-field">Baptismal Date</label>
                                        <div class="date-input-wrapper">
                                            <input type="date" class="form-control" id="baptismDate" required>
                                        </div>
                                        <div class="invalid-feedback">Please provide the baptismal date.</div>
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label required-field">Place of Baptism</label>
                                        <input type="text" class="form-control" id="baptismChurch" placeholder="e.g. Our Lady of Light Shrine, Loon, Bohol" required>
                                        <div class="invalid-feedback">Please provide the place of baptism.</div>
                                    </div>
                                </div>

                                <div class="mb-3">
                                    <label class="form-label required-field">Godparents/Sponsors</label>
                                    <div id="godparentsContainer">
                                        <div class="godparent-row input-group mb-2">
                                            <input type="text" class="form-control godparent-name" placeholder="Full name of Godparent" required>
                                            <span class="input-group-text remove-godparent"><i class="fas fa-times"></i></span>
                                        </div>
                                    </div>
                                    <a id="addGodparent" class="add-godparent"><i class="fas fa-plus-circle me-1"></i> Add another godparent</a>
                                </div>

                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <label class="form-label">Officiating Priest (Optional)</label>
                                        <input type="text" class="form-control" id="officiatingPriest" placeholder="e.g. Rev. Fr. John Paul Smith">
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label">Parish Priest (Optional)</label>
                                        <input type="text" class="form-control" id="parishPriest" placeholder="Rev. John Santos">
                                    </div>
                                </div>
                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <label class="form-label required-field">Father's Name</label>
                                        <input type="text" class="form-control" id="fatherName" placeholder="e.g. Juan Carlos J. Dela Cruz" required>
                                        <div class="invalid-feedback">Please provide the father's name.</div>
                                    </div>
                                    <div class="col-md-6">
                                        <label class="form-label required-field">Mother's Maiden Name</label>
                                        <input type="text" class="form-control" id="motherName" placeholder="e.g. Maria L. Mendoza" required>
                                        <div class="invalid-feedback">Please provide the mother's name.</div>
                                    </div>
                                </div>
                                <div class="mb-4">
                                    <label class="form-label required-field">Contact Info</label>
                                    <input type="email" class="form-control" id="email" placeholder="e.g. juan.delacruz@example.com" required>
                                    <div class="invalid-feedback">Please provide a valid email address.</div>
                                </div>
                                <div class="form-check mb-4">
                                    <input class="form-check-input" type="checkbox" id="agreeTerms" required>
                                    <label class="form-check-label" for="agreeTerms">
                                        I certify that the information provided is accurate and I agree to the 
                                        <a href="#" data-bs-toggle="modal" data-bs-target="#termsModal">terms and conditions.</a>
                                    </label>
                                    <div class="invalid-feedback">You must agree to the terms and conditions.</div>
                                </div>
                                <div class="text-center">
                                    <button type="button" class="btn btn-primary px-4" id="submitBtn" onclick="validateForm()">
                                        <i class="fas fa-paper-plane me-2"></i> Submit Request
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>

                    <div id="reviewSection" style="display: none;">
                        <div class="card shadow-sm p-4">
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <h4>Review Your Details</h4>
                                <button type="button" class="btn btn-outline-secondary btn-sm" onclick="goBack()"><i class="fas fa-edit"></i> Edit Details</button>
                            </div>
                            <div class="mb-4">
                                <h6>Personal Details</h6>
                                <div class="review-row">
                                    <strong>Child's Full Name:</strong>
                                    <span class="review-value" id="reviewChildName"></span>
                                </div>
                                <div class="review-row">
                                    <strong>Date of Birth:</strong>
                                    <span class="review-value" id="reviewBirthDate"></span>
                                </div>
                                <div class="review-row">
                                    <strong>Place of Birth:</strong>
                                    <span class="review-value" id="reviewBirthPlace"></span>
                                </div>
                            </div>
                            <div class="mb-4">
                                <h6>Baptism Details</h6>
                                <div class="review-row">
                                    <strong>Baptismal Date:</strong> 
                                    <span class="review-value" id="reviewBaptismDate"></span>
                                </div> 
                                <div class="review-row"> 
                                    <strong>Place of Baptism:</strong> 
                                    <span class="review-value" id="reviewBaptismChurch"></span>
                                </div>
                                <div class="review-row">
                                    <strong>Name of Officiating Priest:</strong> 
                                    <span class="review-value" id="reviewOfficiatingPriest"></span>
                                </div>
                                <div class="review-row">
                                    <strong>Parish Priest:</strong> 
                                    <span class="review-value" id="reviewParishPriest"></span>
                                </div>
                                <div class="review-row">
                                    <strong>Name of Godparents/Sponsors:</strong> 
                                    <div class="review-value review-godparents-container" id="reviewGodparents"></div>
                                </div>
                            </div>
                            <div class="mb-4">
                                <h6>Parent's Details</h6>
                                <div class="review-row">
                                    <strong>Father's Name:</strong> 
                                    <span class="review-value" id="reviewFatherName"></span>
                                </div>
                                <div class="review-row">
                                    <strong>Mother's Maiden Name:</strong> 
                                    <span class="review-value" id="reviewMotherName"></span>
                                </div>
                            </div>
                            <div class="mb-4">
                                <h6>Contact Information</h6>
                                <div class="review-row">
                                    <strong>Email:</strong> 
                                    <span class="review-value" id="reviewEmail"></span>
                                </div>
                            </div>
                            <div class="alert alert-info d-flex align-items-center" role="alert">
                                <i class="fas fa-info-circle me-2"></i>
                                <div>Please review all the details before submitting.</div>
                            </div>
                            <div class="text-center mt-4">
                                <button type="button" class="btn btn-primary px-4" id="confirmSubmitBtn" onclick="submitRequest()">Confirm & Submit</button>
                            </div>
                        </div>
                    </div>
            </div>
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <div class="row">
                <div class="col-md-4">
                    <div class="footer-logo d-flex align-items-center mb-3">
                        <img src="LOGO.png" alt="Church Logo" class="footer-logo-img">
                        <span class="church-name text-white">Our Lady of Light Shrine</span>
                    </div>
                    <p>Official Church Document Requirement and Tracking Portal</p>
                </div>
                <div class="col-md-2">
                    <h5 class="footer-title">Quick Links</h5>
                    <div class="footer-links">
                        <a href="#"><i class="fas fa-chevron-right me-2"></i> Home</a>
                        <a href="#"><i class="fas fa-chevron-right me-2"></i> About</a>
                        <a href="#"><i class="fas fa-chevron-right me-2"></i> Services</a>
                        <a href="#"><i class="fas fa-chevron-right me-2"></i> Contacts</a>
                    </div>
                </div>
                <div class="col-md-3">
                    <h5 class="footer-title">Services</h5>
                    <div class="footer-links">
                        <a href="#"><i class="fas fa-chevron-right me-2"></i> Baptismal</a>
                    </div>
                </div>
                <div class="col-md-3">
                    <h5 class="footer-title">Contact Information</h5>
                    <div class="contact-info">
                        <p><i class="fas fa-map-marker-alt me-2"></i> Loon, Bohol</p>
                        <p><i class="fas fa-phone me-2"></i> (123) 456-7890</p>
                        <p><i class="fas fa-envelope me-2"></i> sacraments@ourladyoflight.org</p>
                    </div>
                </div>
            </div>
            <div class="row mt-4">
                <div class="col-12 text-center">
                    <p class="mb-0">&copy; <span id="currentYear"></span> Our Lady of Light Shrine. All rights reserved.</p>
                </div>
            </div>
        </div>
    </footer>

    <div class="modal fade" id="termsModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Terms and Conditions</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>By submitting this request, you certify that all information provided is accurate to the best of your knowledge. Falsification of information may result in the cancellation of your request. Our Lady of Light Shrine reserves the right to verify all information provided before issuing any certificates.</p>
                    <p>Processing time may take 3-5 business days. You will receive an email notification once your request has been processed.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="successSubmittedModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-body text-center p-5">
                    <div class="success-icon">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <h3 class="mt-3">REQUEST SUBMITTED SUCCESSFULLY!</h3>
                    <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"></script>
    
<script>
    document.addEventListener('DOMContentLoaded', function() {
        document.getElementById('currentYear').textContent = new Date().getFullYear();

        const form = document.getElementById('baptismalForm');
        const requestFormSection = document.getElementById('requestFormSection');
        const reviewSection = document.getElementById('reviewSection');
        const emailInput = document.getElementById('email');
        const godparentsContainer = document.getElementById('godparentsContainer');
        const addGodparentBtn = document.getElementById('addGodparent');
        const backToEditBtn = document.querySelector('[onclick="goBack()"]');
        const confirmSubmitBtn = document.getElementById('confirmSubmitBtn');
        const submitBtn = document.getElementById('submitBtn');

        function initializeGodparents() {
            document.querySelector('.remove-godparent')?.addEventListener('click', function() {
                if (godparentsContainer.querySelectorAll('.godparent-row').length > 1) {
                    godparentsContainer.removeChild(this.closest('.godparent-row'));
                } else {
                    return;
                }
            });
            
            addGodparentBtn.addEventListener('click', function() {
                const newRow = document.createElement('div');
                newRow.className = 'godparent-row input-group mb-2';
                newRow.innerHTML = `
                    <input type="text" class="form-control godparent-name" placeholder="Full name of Godparent" required>
                    <span class="input-group-text remove-godparent"><i class="fas fa-times"></i></span>`;
                godparentsContainer.appendChild(newRow);
                
                newRow.querySelector('.remove-godparent').addEventListener('click', function() {
                    if (godparentsContainer.querySelectorAll('.godparent-row').length > 1) {
                        godparentsContainer.removeChild(newRow);
                    }
                });
            });
        }
        
        initializeGodparents();

        function validateEmail(email) {
            const re = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
            return re.test(String(email).toLowerCase());
        } 

        emailInput.addEventListener('blur', function() {
            validateEmailField();
        });
        
        function validateEmailField() {
            if (!emailInput.value.trim() || !validateEmail(emailInput.value)) {
                emailInput.classList.add('is-invalid');
                emailInput.nextElementSibling.style.display = 'block';
                return false;
            } else {
                emailInput.classList.remove('is-invalid');
                emailInput.nextElementSibling.style.display = 'none';
                return true;
            }
        }
        
        function showValidationError(field) {
            field.classList.add('is-invalid');
            const feedback = field.nextElementSibling;
            if (feedback && feedback.classList.contains('invalid-feedback')) {
                feedback.style.display = 'block';
            }
        }
        
        function hideValidationError(field) {
            field.classList.remove('is-invalid');
            const feedback = field.nextElementSibling;
            if (feedback && feedback.classList.contains('invalid-feedback')) {
                feedback.style.display = 'none';
            }
        }
        
        function validateGodparents() {
            let isValid = true;
            const godparentFields = document.querySelectorAll('.godparent-name');
            
            godparentFields.forEach(field => {
                if (!field.value.trim()) {
                    showValidationError(field);
                    isValid = false;
                } else {
                    hideValidationError(field);
                }
            });
            
            return isValid;
        }
        
        window.validateForm = function() {
            let formIsValid = true;
            
            const allFields = form.querySelectorAll('.form-control, .form-check-input');
            allFields.forEach(field => {
                hideValidationError(field);
            });
    
            const agreeTerms = document.getElementById('agreeTerms');
            const agreeTermsLabel = document.querySelector('label[for="agreeTerms"]');
            if (!agreeTerms.checked) {
                agreeTerms.classList.add('is-invalid');
                agreeTermsLabel.classList.add('is-invalid');
                formIsValid = false;
            } else {
                agreeTerms.classList.remove('is-invalid');
                agreeTermsLabel.classList.remove('is-invalid');
            }
            
            if (!validateEmailField()) {
                formIsValid = false;
            }
    
            if (!validateGodparents()) {
                formIsValid = false;
            }
            
            const requiredFields = form.querySelectorAll('[required]');
            
            requiredFields.forEach(field => {
                if (!field.value.trim()) {
                    showValidationError(field);
                    formIsValid = false;
                } else {
                    hideValidationError(field);
                }
            });
            
            if (formIsValid) {
                const formData = {
                    childName: document.getElementById('childName').value,
                    birthDate: document.getElementById('birthDate').value,
                    birthPlace: document.getElementById('birthPlace').value,
                    fatherName: document.getElementById('fatherName').value,
                    motherName: document.getElementById('motherName').value,
                    baptismDate: document.getElementById('baptismDate').value,
                    baptismChurch: document.getElementById('baptismChurch').value,
                    officiatingPriest: document.getElementById('officiatingPriest').value,
                    parishPriest: document.getElementById('parishPriest').value,
                    godparents: Array.from(document.querySelectorAll('.godparent-name')).map(el => el.value),
                    email: emailInput.value
                };

                const formatDate = (dateString) => {
                    if (!dateString) return '';
                    const options = { year: 'numeric', month: 'long', day: 'numeric' };
                    return new Date(dateString).toLocaleDateString(undefined, options);
                };

                document.getElementById('reviewChildName').textContent = formData.childName;
                document.getElementById('reviewBirthDate').textContent = formatDate(formData.birthDate);
                document.getElementById('reviewBirthPlace').textContent = formData.birthPlace;
                document.getElementById('reviewFatherName').textContent = formData.fatherName;
                document.getElementById('reviewMotherName').textContent = formData.motherName;
                document.getElementById('reviewBaptismDate').textContent = formatDate(formData.baptismDate);
                document.getElementById('reviewBaptismChurch').textContent = formData.baptismChurch;
                
                if (formData.officiatingPriest) {
                    document.getElementById('reviewOfficiatingPriest').textContent = formData.officiatingPriest;
                } else {
                    document.getElementById('reviewOfficiatingPriest').textContent = '-';
                }
                
                if (formData.parishPriest) {
                    document.getElementById('reviewParishPriest').textContent = formData.parishPriest;
                } else {
                    document.getElementById('reviewParishPriest').textContent = '-';
                }
                
                document.getElementById('reviewEmail').textContent = formData.email;
        
                const reviewGodparents = document.getElementById('reviewGodparents');
                reviewGodparents.innerHTML = '';
                formData.godparents.forEach(godparent => {
                    if (godparent) {
                        const p = document.createElement('div');
                        p.textContent = godparent;
                        p.style.marginBottom = '5px';
                        reviewGodparents.appendChild(p);
                    }
                });
        
                requestFormSection.style.display = 'none';
                reviewSection.style.display = 'block';
                window.scrollTo({ top: reviewSection.offsetTop, behavior: 'smooth' });
                } else {
                    const firstInvalidField = form.querySelector('.is-invalid');
                    if (firstInvalidField) {
                        firstInvalidField.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    }
                }
            };
        
            window.goBack = function() { 
                reviewSection.style.display = 'none'; 
                requestFormSection.style.display = 'block'; 
                submitBtn.innerHTML = '<i class="fas fa-save me-2"></i> Update Changes'; 
                window.scrollTo({ top: 0, behavior: 'smooth' }); 
            };
        
            window.submitRequest = function() {
                const successSubmittedModal = new bootstrap.Modal(document.getElementById('successSubmittedModal'));
                successSubmittedModal.show();
                
                document.getElementById('successSubmittedModal').addEventListener('hidden.bs.modal', function() {
                    form.reset();
                    reviewSection.style.display = 'none';
                    requestFormSection.style.display = 'block';
                    submitBtn.innerHTML = '<i class="fas fa-paper-plane me-2"></i> Submit Request'; // Reset button text
                    
                    const godparentRows = godparentsContainer.querySelectorAll('.godparent-row');
                    for (let i = 1; i < godparentRows.length; i++) {
                        godparentsContainer.removeChild(godparentRows[i]);
                    }
                    
                    initializeGodparents();
                });
            };
        });
</script>
</body>
</html>
